<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="./css/extensionMain.css" />
    <link rel="stylesheet" href="./css/table_more.css">

    <script src="./js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="./js/extension_main.js"></script>

    <title>Document</title>
</head>

<body>

    <section class="table_level">
        <div class="thead">
            <li>部门</li>
            <li>
                <span class="sort_type sort_up">业绩<i class="sort_normal"></i></span>
            </li>
            <li><span class="sort_type sort_up">客单价<i class="sort_normal"></i></span></li>
            <li><span class="sort_type sort_up">客户数<i class="sort_normal"></i></span></li>
            <li>
                <span class="sort_type sort_up">通话时长<i class="sort_normal"></i></span>
            </li>
            <li>
                <span class="sort_type sort_up">拨打机会数<i class="sort_normal"></i></span>
            </li>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>
            <li>10</li>
        </div>
        <ul class="tbody">
            <div>
                <li><i class="iconfont iconplus-square"></i><span>一级</span></li>
                <li><i class="iconfont iconminus-square"></i>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
            </div>
            <ul>
                <div>
                    <li><i class="iconfont iconplus-square"></i><span>二级</span></li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                </div>
            </ul>
            <div>
                <li><i class="iconfont iconplus-square"></i><span>一级</span></li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
            </div>
            <ul>
                <div>
                    <li><i class="iconfont iconplus-square"></i><span>二级</span></li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                </div>
            </ul>
            <div>
                <li><i class="iconfont iconplus-square"></i><span>一级</span></li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
            </div>
            <ul>
                <div>
                    <li><i class="iconfont iconplus-square"></i><span>二级</span></li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                </div>
            </ul>
            <div>
                <li><i class="iconfont iconplus-square"></i><span>一级</span></li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
                <li>一级</li>
            </div>
            <ul>
                <div>
                    <li><i class="iconfont iconplus-square"></i><span>二级</span></li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                    <li>二级</li>
                </div>
            </ul>

        </ul>
    </section>


    <script>

        // table_level 新多级表格样式(周推广分析/年推广分析)
        $(function () {

            var pdv = document.querySelector(".table_level")    //总表元素
            pdv.onscroll = function () {
                var heads = document.querySelector(".table_level>.thead")   //表头
                var tbody = pdv.querySelector(".tbody") //表身
                var lis = document.querySelectorAll(".table_level div>li:first-of-type")    //首列元素(含表头)
                var second_lis = document.querySelectorAll(".table_level div>li:nth-of-type(2)") //第二列列元素(含表头)

                $(lis).css("position", "absolute")
                heads.style.position = "absolute"
                tbody.style.marginTop = heads.offsetHeight + "px"

                //3. 第二列元素设置x轴偏移量
                $(second_lis).css("marginLeft", $(lis).eq(0)[0].offsetWidth + "px")

                //1. 表头浮动
                heads.style.top = $(pdv).scrollTop() + "px"

                //2. 第一列元素固定定位(含表头)
                var shacss = $(pdv).scrollLeft() == 0 ? "0 0 0 0" : "2px 1px 3px 0px #ccc"

                $(lis).css({ "boxShadow": shacss, "left": $(pdv).scrollLeft() + "px" })
            }
        })
    </script>

</body>

</html>